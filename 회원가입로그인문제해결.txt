==========================================
회원가입/로그인 문제 해결 가이드
==========================================

회원가입/로그인이 작동하지 않는 가장 흔한 원인과 해결 방법입니다.

==========================================
문제 1: "이메일 확인이 필요합니다" 오류
==========================================

원인: Supabase에서 이메일 확인이 활성화되어 있음

해결 방법:
1. Supabase 대시보드 접속
2. "Authentication" → "Settings" 클릭
3. "Enable email confirmations" 체크박스 해제
4. "Save" 클릭
5. Vercel에서 "Redeploy" 실행

==========================================
문제 2: "서버 설정 오류입니다" 메시지
==========================================

원인: 환경 변수가 설정되지 않았거나 잘못됨

해결 방법:
1. Vercel 대시보드 접속
2. 프로젝트 → "Settings" → "Environment Variables"
3. 다음 변수 확인:

   SUPABASE_URL
   - 형식: https://xxxxxxxxxxxxx.supabase.co
   - ⚠️ 마지막에 슬래시(/) 없어야 함
   - ⚠️ https://로 시작해야 함

   SUPABASE_SERVICE_KEY
   - 형식: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... (매우 긴 문자열)
   - ⚠️ service_role key여야 함 (anon key 아님)
   - ⚠️ 앞뒤 공백 없어야 함
   - ⚠️ 전체를 복사해야 함

4. 변수가 없거나 잘못되었다면:
   - "Add New" 클릭
   - Name: SUPABASE_URL 또는 SUPABASE_SERVICE_KEY
   - Value: 올바른 값 입력
   - Environment: Production, Preview, Development 모두 체크
   - "Save" 클릭

5. 환경 변수 수정 후:
   - "Deployments" 탭으로 이동
   - 최신 배포 옆 "..." 메뉴 클릭
   - "Redeploy" 클릭
   - "Use existing Build Cache" 체크 해제
   - "Redeploy" 클릭

==========================================
문제 3: "이미 등록된 이메일입니다" 오류
==========================================

원인: 해당 이메일로 이미 가입됨

해결 방법:
1. 다른 이메일로 시도
2. 또는 Supabase에서 기존 사용자 삭제:
   - Supabase → "Authentication" → "Users"
   - 해당 사용자 찾기
   - "..." 메뉴 → "Delete user"

==========================================
문제 4: 로그인은 되는데 회원가입이 안됨
==========================================

원인: Supabase 설정 문제

해결 방법:
1. Supabase "Authentication" → "Settings" 확인
2. "Enable email confirmations" 해제 확인
3. Vercel 환경 변수 확인
4. Vercel "Redeploy" 실행

==========================================
문제 5: 회원가입은 되는데 로그인이 안됨
==========================================

원인: 비밀번호 오류 또는 이메일 확인 필요

해결 방법:
1. 비밀번호가 올바른지 확인
2. Supabase "Authentication" → "Users"에서 사용자 확인
3. 사용자 상태가 "Confirmed"인지 확인
4. "Unconfirmed"라면:
   - Supabase에서 수동으로 확인 처리
   - 또는 "Enable email confirmations" 해제 후 재가입

==========================================
체크리스트
==========================================

다음을 하나씩 확인하세요:

□ Supabase "Enable email confirmations" 해제됨
□ Vercel에 SUPABASE_URL 설정됨 (올바른 형식)
□ Vercel에 SUPABASE_SERVICE_KEY 설정됨 (service_role key)
□ 환경 변수 수정 후 "Redeploy" 실행함
□ 브라우저 개발자 도구(F12) → Console에서 에러 확인
□ Vercel "Deployments" → "View Function Logs"에서 에러 확인

==========================================
디버깅 방법
==========================================

1. 브라우저 개발자 도구 열기 (F12)
2. "Console" 탭 확인
3. 회원가입/로그인 시도
4. 에러 메시지 확인

5. Vercel 로그 확인:
   - Vercel 대시보드
   - "Deployments" 탭
   - 최신 배포 클릭
   - "View Function Logs" 클릭
   - 에러 메시지 확인

==========================================
여전히 작동하지 않는다면
==========================================

1. Supabase 설정 가이드 확인: "Supabase설정가이드.txt"
2. Vercel 환경 변수 다시 확인
3. 코드를 GitHub에 푸시하고 Vercel에서 재배포
4. Supabase 프로젝트를 새로 만들고 다시 시도

==========================================

